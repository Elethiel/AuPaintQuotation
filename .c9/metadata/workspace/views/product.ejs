{"filter":false,"title":"product.ejs","tooltip":"/views/product.ejs","undoManager":{"mark":39,"position":39,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":23,"column":46},"end":{"row":24,"column":0}},"text":"\n"},{"action":"insertText","range":{"start":{"row":24,"column":0},"end":{"row":24,"column":28}},"text":"                            "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":28},"end":{"row":24,"column":29}},"text":"<"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":29},"end":{"row":24,"column":30}},"text":"%"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":30},"end":{"row":24,"column":31}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":31},"end":{"row":24,"column":32}},"text":"i"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":32},"end":{"row":24,"column":33}},"text":"n"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":33},"end":{"row":24,"column":34}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":34},"end":{"row":24,"column":35}},"text":"l"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":35},"end":{"row":24,"column":36}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":36},"end":{"row":24,"column":37}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":37},"end":{"row":24,"column":38}},"text":"e"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":38},"end":{"row":24,"column":39}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":39},"end":{"row":24,"column":40}},"text":"p"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":40},"end":{"row":24,"column":41}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":41},"end":{"row":24,"column":42}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":42},"end":{"row":24,"column":43}},"text":"d"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":43},"end":{"row":24,"column":44}},"text":"u"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":44},"end":{"row":24,"column":45}},"text":"c"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":45},"end":{"row":24,"column":46}},"text":"t"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":46},"end":{"row":24,"column":47}},"text":"F"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":47},"end":{"row":24,"column":48}},"text":"o"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":48},"end":{"row":24,"column":49}},"text":"r"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":49},"end":{"row":24,"column":50}},"text":"m"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":50},"end":{"row":24,"column":51}},"text":" "}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":51},"end":{"row":24,"column":52}},"text":"%"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":52},"end":{"row":24,"column":53}},"text":">"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":24,"column":28},"end":{"row":24,"column":32}},"text":"    "}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":279,"column":0},"end":{"row":279,"column":39}},"text":"                                </form>"},{"action":"removeLines","range":{"start":{"row":26,"column":0},"end":{"row":279,"column":0}},"nl":"\n","lines":["                                        data-bv-feedbackicons-valid=\"glyphicon glyphicon-ok\"","                                        data-bv-feedbackicons-invalid=\"glyphicon glyphicon-remove\"","                                        data-bv-feedbackicons-validating=\"glyphicon glyphicon-refresh\">","                                    <% if (srv.Obj) { %>","                                        <legend><h1>Modifier une Prestation</h1></legend>","                                    <% } else { %>","                                        <legend><h1>Ajouter une Prestation</h1></legend>","                                    <% }%>","                                    <% if (srv.pstatus) { %>","                                        <div class=\"form-group text-center\">","                                            <% if (srv.pstatus === \"ok\") { %><span class=\"label label-success\">Prestation bien enregistrée !</span><% } %>","                                            <% if (srv.pstatus === \"nok\") { %><span class=\"label label-danger\">Erreur lors de la mise à jour</span><% } %>","                                            <% if (srv.pstatus === \"unq\") { %><span class=\"label label-danger\">Le CODE n'est pas unique. Il est déjà utilisé sur le prestation (<%= srv.productId %>)</span><% } %>","                                        </div>","                                        &nbsp;<br/>","                                    <% } %>","                                    <div class=\"row text-center\">","                                        <small class=\"help\">Les prestations seront les éléments de bases permettant de faire un devis ou une facture.</small><br/>","                                    </div>","                                    &nbsp;<br/>","                                    <% if (srv.Obj && srv.Obj.productId) { %>","                                        <input type=\"hidden\" name=\"productId\" id=\"productId\" value=\"<%= srv.Obj.productId %>\">","                                    <% } %>","                                    &nbsp;<br/>","                                    <div class=\"form-group\">","                                        <label for=\"groupProductId\" class=\"col-sm-4 control-label\">Catégorie","                                            <a href=\"#\" data-placement=\"bottom\" tabindex=\"-1\"","                                                data-tooltip=\"N'apparait pas au client. Il s'agit d'un classement interne.\">","                                                <span class=\"glyphicon glyphicon-info-sign\"></span></a>","                                        </label>","                                        <div class=\"col-sm-8\">","                                            <input type=\"hidden\" name=\"groupProductId\" id=\"groupProductId\" value=\"<% if (srv.Obj && srv.Obj.groupProductId) { %><%= srv.Obj.groupProductId %><% } %>\" />","                                            <input type=\"hidden\" name=\"groupProductTVAPercent\" id=\"groupProductTVAPercent\" value=\"<% if (srv.Obj && srv.Obj.TVAPercent) { %><%= srv.Obj.TVAPercent %><% } %>\" ","                                                    trigger=\"blur\"","                                                    data-bv-regexp=\"true\"","                                                    data-bv-regexp-regexp=\"^([0-9])*((\\.)|,){0,1}([0-9]){0,2}$\"","                                                    data-bv-regexp-message=\"Merci de sélectionner une Catégorie !\" ","                                                    data-bv-notempty=\"true\"","                                                    data-bv-notempty-message=\"Merci de sélectionner une Catégorie !\">","                                            <input type=\"hidden\" name=\"maxGroupList\" id=\"maxGroupList\" value=\"<%= srv.groupProductList.length %>\" />","                                            <div class=\"btn-group\">","                                                <button id=\"selectGroup\" type=\"button\" class=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\" tabindex=-1>","                                                    <% if (srv.Obj && srv.Obj.groupProductId) { %>","                                                        <table class='nothing' border='0'>","                                                            <tr>","                                                                <td width='80' class='text-center'>","                                                                    <% if (srv.Obj.groupProductIcon) { %>","                                                                        <img src=\"<%= srv.Obj.groupProductIcon %>\" border=\"0\" />","                                                                    <% } %>","                                                                </td>","                                                                <td class='text-left'>","                                                                    <%= srv.Obj.groupProductLabel %> ( <%= srv.Obj.TVALabel %> )","                                                                </td>","                                                            </tr>","                                                        </table>","                                                    <% } else { %>Sélectionnez une Catégorie<% } %>","                                                </button>","                                                <button id=\"selectDrop\" type=\"button\" class=\"btn btn-default dropdown-toggle\" data-toggle=\"dropdown\" tabindex=1>","                                                    <span class=\"caret\"></span>","                                                    <span class=\"sr-only\">Toggle Dropdown</span>","                                                </button>","                                                <ul class=\"dropdown-menu groupProductDropDown\" role=\"menu\">","                                                    <% for(var i = 0; i < srv.groupProductList.length; i++) { %>","                                                        <li>","                                                            <input id=\"optionGroupId<%= i %>\" type=\"hidden\" value=\"<%= srv.groupProductList[i].groupProductId %>\" />","                                                            <input id=\"TVAPercent<%= i %>\" type=\"hidden\" value=\"<% if (srv.groupProductList[i].TVAPercent) { %><%= srv.groupProductList[i].TVAPercent %><% } %>\" />","                                                            <a href=\"#\" id=\"optionGroup<%= i %>\">","                                                                <table class='nothing' border='0'>","                                                                    <tr>","                                                                        <td width='80' class='text-center'>","                                                                            <% if (srv.groupProductList[i].groupProductIcon) { %>","                                                                                <img src=\"<%= srv.groupProductList[i].groupProductIcon %>\" border=\"0\" />","                                                                            <% } %>","                                                                        </td>","                                                                        <td class='text-left'>","                                                                            <%= srv.groupProductList[i].groupProductLabel %> ( <%= srv.groupProductList[i].TVALabel %> )","                                                                        </td>","                                                                    </tr>","                                                                </table>","                                                            </a>","                                                        </li>","                                                    <% } %>","                                                </ul>","                                            </div>","                                        </div>","                                    </div>","                                    <div class=\"row\">","                                        <div class=\"col-sm-12 text-center\">","                                            <small>Pour configurer les Catégories possibles suivre <a href=\"/managementMenu?subLoc=groupproduct\">ce lien</a>.</small>","                                        </div>","                                    </div>","                                    &nbsp;<br/>","                                    <div class=\"form-group\">","                                        <label for=\"productCode\" class=\"col-sm-4 control-label\">CODE","                                            <a href=\"#\" data-placement=\"bottom\" tabindex=\"-1\"","                                                data-tooltip=\"Le code apparaîtra sur les devis/factures des clients comme","                                                            référence unique pour une prestation donnée. (ex: P01, R2b, ...)\">","                                                <span class=\"glyphicon glyphicon-info-sign\"></span></a>","                                        </label>","                                        <div class=\"col-sm-4\">","                                            <input class=\"form-control\" name=\"productCode\" id=\"productCode\" type=\"text\" placeholder=\"Un Code unique\" tabindex=2","                                                <% if (srv.Obj && srv.Obj.productCode) { %> value=\"<%= srv.Obj.productCode %>\" <% } %>>","                                        </div>","                                    </div>","                                    <div class=\"form-group\">","                                        <label for=\"productLabel\" class=\"col-sm-4 control-label\">Libellé","                                            <a href=\"#\" data-placement=\"bottom\" tabindex=\"-1\"","                                                data-tooltip=\"Le libellé est ce qui apparaîtra sur le devis/la facture pour le client (ex: 1 repas adulte, Paintball: 100 billes, 1 animateur (/h), 1 animateur (/jour),...).","                                                            Attention car un texte trop grand déformera les devis et facture !","                                                            Restez synthétique !\">","                                                <span class=\"glyphicon glyphicon-info-sign\"></span></a>","                                        </label>","                                        <div class=\"col-sm-8\">","                                            <input class=\"form-control\" name=\"productLabel\" id=\"productLabel\" type=\"text\" placeholder=\"Description synthétique de la prestation\" tabindex=3","                                                <% if (srv.Obj && srv.Obj.productLabel) { %> value=\"<%= srv.Obj.productLabel %>\" <% } %>","                                                trigger=\"blur\"","                                                data-bv-notempty=\"true\"","                                                data-bv-notempty-message=\"Le libellé de la Prestation est obligatoire !\">","                                        </div>","                                    </div>","                                    <div class=\"form-group\">","                                        <label for=\"productPaid\" class=\"col-sm-4 control-label\">Coût interne","                                            <a href=\"#\" data-placement=\"bottom\" tabindex=\"-1\"","                                                data-tooltip=\"Permet de calculer les marges sur les ventes.\">","                                                <span class=\"glyphicon glyphicon-info-sign\"></span></a>","                                        </label>","                                        <div class=\"col-sm-5\">","                                            <div class=\"input-group\">","                                                <span class=\"input-group-addon\">€</span>","                                                <input class=\"form-control\" name=\"productPaid\" id=\"productPaid\" type=\"text\" placeholder=\"xx.xx\" tabindex=4","                                                    <% if (srv.Obj && srv.Obj.productPaid) { %> value=\"<%= srv.Obj.productPaid %>\" <% } %>","                                                    trigger=\"keyup blur\"","                                                    data-bv-regexp=\"true\"","                                                    data-bv-regexp-regexp=\"^([0-9])*((\\.)|,){0,1}([0-9]){0,2}$\"","                                                    data-bv-regexp-message=\"Le coût doit être un chiffre avec 2 digits\">","                                            </div>","                                        </div>","                                    </div>","                                    &nbsp;<br/>","","                                    <div class=\"form-group\">","                                        <label for=\"productTTC\" class=\"col-sm-4 control-label\">Prix de Vente (TTC)","                                            <a href=\"#\" data-placement=\"bottom\" tabindex=\"-1\"","                                                data-tooltip=\"Il s'agit du prix client affiché sur le devis en TTC.","                                                            Le prix HT est calculé automatiquement selon la TVA en cours sur cette prestation si vous modifiez celui-ci. Inversement, il sera mis à jour automatiquement si vous modifiez le prix HT.\">","                                                <span class=\"glyphicon glyphicon-info-sign\"></span></a>","                                        </label>","                                        <div class=\"col-sm-5\">","                                            <div class=\"input-group\">","                                                <span class=\"input-group-addon\">€</span>","                                                <input class=\"form-control\" name=\"productTTC\" id=\"productTTC\" type=\"text\" placeholder=\"xx.xx\" tabindex=5","                                                    <% if (srv.Obj && srv.Obj.productTTC) { %> value=\"<%= srv.Obj.productTTC %>\" <% } %>","                                                    trigger=\"blur\"","                                                    data-bv-regexp=\"true\"","                                                    data-bv-regexp-regexp=\"^([0-9])*((\\.)|,){0,1}([0-9]){0,2}$\"","                                                    data-bv-regexp-message=\"Le prix de vente doit être un chiffre avec 2 digits\"","                                                    data-bv-notempty=\"true\"","                                                    data-bv-notempty-message=\"Le prix de vente est obligatoire !\">","                                            </div>","                                        </div>","                                        <div class=\"col-sm-1\">","                                            <a href=\"#\" data-placement=\"bottom\" tabindex=\"-1\"","                                                data-tooltip=\"Met à jour automatiquement le prix de vente HT.","                                                            Un seul des deux champs ne peut être renseigné à la fois, la TVA influe entre eux.\">","                                                <img src=\"/im/down.png\" border=\"0\" class=\"inputrefresh\" /></a>","                                        </div>","                                    </div>","                                    ","","                                    <div class=\"form-group\">","                                        <label for=\"productHT\" class=\"col-sm-4 control-label\">Prix de Vente (HT)","                                            <a href=\"#\" data-placement=\"bottom\" tabindex=\"-1\"","                                                data-tooltip=\"Il s'agit du prix client affiché sur le devis en HT.","                                                            Le prix TTC est calculé automatiquement selon la TVA en cours sur cette prestation si vous modifiez celui-ci. Inversement, il sera mis à jour automatiquement si vous modifiez le prix TTC.\">","                                                <span class=\"glyphicon glyphicon-info-sign\"></span></a>","                                        </label>","                                        <div class=\"col-sm-5\">","                                            <div class=\"input-group\">","                                                <span class=\"input-group-addon\">€</span>","                                                <input class=\"form-control\" name=\"productHT\" id=\"productHT\" type=\"text\" placeholder=\"xx.xx\" tabindex=6","                                                    trigger=\"blur\"","                                                    data-bv-regexp=\"true\"","                                                    data-bv-regexp-regexp=\"^([0-9])*((\\.)|,){0,1}([0-9]){0,2}$\"","                                                    data-bv-regexp-message=\"Le prix de vente doit être un chiffre avec 2 digits\">","                                            </div>","                                        </div>","                                        <div class=\"col-sm-1\">","                                            <a href=\"#\" data-placement=\"bottom\" tabindex=\"-1\"","                                                data-tooltip=\"Met à jour automatiquement le prix de vente TTC.","                                                        Un seul des deux champs ne peut être renseigné à la fois, la TVA influe entre eux.\">","                                                <img src=\"/im/up.png\" border=\"0\" class=\"inputrefresh\" /></a>","                                        </div>","                                    </div>","                                    ","                                    <div class=\"form-group\">","                                        <label for=\"productUnit\" class=\"col-sm-4 control-label\">Unité","                                            <a href=\"#\" data-placement=\"bottom\" tabindex=\"-1\"","                                                data-tooltip=\"Il s'agit de ce que représente l'unité de temps pour la prestation :","                                                            Est-ce une prestation à la minute ? à l'heure ? à la journée ? à l'unité/la pièce ? ","                                                            Le but est de pouvoir avoir une prestation Animateur (/min), une autre Animateur (/heure) de façon à adapter les tarifs selon les besoins du clients\">","                                                <span class=\"glyphicon glyphicon-info-sign\"></span></a>","                                        </label>","                                        <div class=\"col-sm-8\">","                                            <input class=\"form-control\" name=\"productUnit\" id=\"productUnit\" type=\"text\" placeholder=\"heure, jour, minute, pièce, unité, forfait semaine...\" tabindex=7","                                                <% if (srv.Obj && srv.Obj.productUnit) { %> value=\"<%= srv.Obj.productUnit %>\" <% } %>","                                                >","                                        </div>","                                    </div>","","                                    &nbsp;<br/>","                                    <div class=\"form-group text-right p15LR\">","                                        <button type=\"submit\" class=\"btn btn-primary\">","                                        <% if (srv.Obj) { %>","                                            Modifier","                                        <% } else { %>","                                            Ajouter","                                        <% }%>","                                        </button>","                                    </div>","                                    &nbsp;<br/>","                                    &nbsp;<br/>","                                    &nbsp;<br/>","                                    <div id=\"profit\">","                                        <div class=\"form-group\">","                                            <label for=\"productProfit\" class=\"col-sm-4 control-label\">Marge nette par unité","                                                <a href=\"#\" data-placement=\"bottom\" tabindex=\"-1\"","                                                    data-tooltip=\"Il faut que le coût interne et le prix de vente TTC soit renseignée pour estimer la marge unitaire.\">","                                                    <span class=\"glyphicon glyphicon-info-sign\"></span></a>","                                            </label>","                                            <div class=\"col-sm-6\">","                                                <div class=\"input-group\">","                                                    <span class=\"input-group-addon\">€</span>","                                                    <input class=\"form-control\" disabled name=\"productProfit\" id=\"productProfit\" type=\"text\" />","                                                </div>","                                            </div>","                                        </div>","                                        <div class=\"form-group\">","                                            <label for=\"productProfitFactor\" class=\"col-sm-4 control-label\">Facteur de marge","                                                <a href=\"#\" data-placement=\"bottom\" tabindex=\"-1\"","                                                    data-tooltip=\"Pourcentage proportionnel de marge. Permet de connaître la prestation la plus rentable.\">","                                                    <span class=\"glyphicon glyphicon-info-sign\"></span></a>","                                            </label>","                                            <div class=\"col-sm-6\">","                                                <div class=\"input-group\">","                                                    <span class=\"input-group-addon\">%</span>","                                                    <input class=\"form-control\" disabled name=\"productProfitFactor\" id=\"productProfitFactor\" type=\"text\" />","                                                    <span id=\"factorok\" class=\"input-group-addon glyphicon glyphicon-thumbs-up green\"></span>","                                                    <span id=\"factornull\" class=\"input-group-addon glyphicon glyphicon-hand-right black\"></span>","                                                    <span id=\"factornok\" class=\"input-group-addon glyphicon glyphicon-thumbs-down red\"></span>","                                                </div>","                                            </div>","                                        </div>","                                    </div>"]},{"action":"removeText","range":{"start":{"row":25,"column":32},"end":{"row":25,"column":128}},"text":"<form class=\"form-horizontal\" id=\"productForm\" role=\"form\" action=\"/productUpdate\" method=\"post\""},{"action":"removeText","range":{"start":{"row":25,"column":32},"end":{"row":26,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":25,"column":0},"end":{"row":25,"column":32}},"text":"                                "},{"action":"removeText","range":{"start":{"row":24,"column":57},"end":{"row":25,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":22,"column":24},"end":{"row":22,"column":69}},"text":"<div class=\"col-md-8 col-md-offset-2 center\">"},{"action":"insertText","range":{"start":{"row":22,"column":24},"end":{"row":22,"column":82}},"text":"<div class=\"col-md-10 col-md-offset-1 text-center center\">"}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":14},"end":{"row":1,"column":15},"action":"remove","lines":["\""]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":13},"end":{"row":1,"column":14},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":12},"end":{"row":1,"column":13},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":11},"end":{"row":1,"column":12},"action":"remove","lines":["\""]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":10},"end":{"row":1,"column":11},"action":"remove","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":9},"end":{"row":1,"column":10},"action":"remove","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":8},"end":{"row":1,"column":9},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":7},"end":{"row":1,"column":8},"action":"remove","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":6},"end":{"row":1,"column":7},"action":"remove","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":1,"column":5},"end":{"row":1,"column":6},"action":"remove","lines":[" "]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":1,"column":5},"end":{"row":1,"column":5},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1418721253205,"hash":"d977b2e3ea99aea97f60ab9fb6e9366531a5f122"}